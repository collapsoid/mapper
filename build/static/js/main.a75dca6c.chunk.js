(this.webpackJsonpmapper=this.webpackJsonpmapper||[]).push([[0],{18:function(e,t,n){e.exports=n(34)},28:function(e,t,n){},29:function(e,t,n){},30:function(e,t,n){},31:function(e,t,n){},32:function(e,t,n){},33:function(e,t,n){},34:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(7),o=n.n(r),u=n(1),s=(n(28),n(4)),i=(n(29),n(2)),l=n(17),p=function(e){return{type:"ADD_PLACE",payload:Object(i.a)({},e,{id:Object(l.a)()})}},m=function(e){return{type:"DELETE_PLACE",id:e}},d=function(e){return{type:"GET_YMAPS_API",YMapsAPI:e}},f=function(e){return{type:"GET_MAP_INSTANCE",mapInstance:e}},E=function(e,t){return{type:"GET_PLACEMARK_COORDINATES",payload:{name:e,coordinates:t}}},b=(n(30),function(e){var t=e.className,n=e.text;return c.a.createElement("div",{className:"".concat(t," popup")},c.a.createElement("p",{className:"popup__text"},n))}),O=Object(u.b)((function(e){return{places:e.places}}),{addPlace:p})((function(e){var t=e.places,n=e.addPlace,r=Object(a.useState)(""),o=Object(s.a)(r,2),u=o[0],i=o[1],l=Object(a.useState)(!1),p=Object(s.a)(l,2),m=p[0],d=p[1],f=function(e){return-1!==t.findIndex((function(t){return t.name.toLowerCase()===e.toLowerCase().trim()}))};return c.a.createElement("div",{className:"input"},c.a.createElement("input",{className:"search-bar".concat(m?" bad-name":""),type:"text",value:u,placeholder:"Where to go?",onChange:function(e){var t=e.target.value;i(t),f(t)?d(!0):d(!1)},onKeyDown:function(e){return"Enter"===e.key?function(){var e={name:u.trim(),isUserDefined:!!u.startsWith("!")};if(!m)return i(""),n(e)}():null}}),c.a.createElement(b,{className:"input__popup",text:"Enter the name of the city or type something like !MyPlacemark to set your own mark label"}))})),g=(n(31),n(32),Object(u.b)(null,{deletePlace:m})((function(e){var t=e.name,n=e.id,a=e.isUserDefined,r=e.deletePlace,o=a?" place_user-defined":"";return c.a.createElement("div",{className:"places-list__place".concat(o)},t,c.a.createElement("div",{className:"place__remove-button",onClick:function(){return r(n)}},"x"))}))),j=Object(u.b)((function(e){return{places:e.places}}),null)((function(e){var t=e.places.map((function(e){return c.a.createElement(g,Object.assign({},e,{key:e.id}))}));return c.a.createElement("div",{className:"places-list"},t)})),y=n(6),A=(n(33),Object(u.b)((function(e){return{placemarks:e.placemarks}}),{geocoder:function(e,t){return function(n,a){var c=a().YMaps,r=c.YMapsAPI,o=c.mapInstance;return t?n(E(e,o.getCenter())):r.geocode(e).then((function(t){return n(E(e,t.geoObjects.get(0).geometry._coordinates))}))}}})((function(e){var t=e.name,n=e.isUserDefined,r=e.coordinates,o=e.geocoder,u={hintContent:t},s={draggable:!!n,preset:n?"islands#greenIcon":"islands#lightBlueIcon"};return Object(a.useEffect)((function(){o(t,n)}),[t,n,o]),c.a.createElement(y.b,{modules:["geoObject.addon.hint"],geometry:r,properties:u,options:s})}))),_=Object(u.b)((function(e){return{places:e.places,mapInstance:e.YMaps.mapInstance}}),{getYMapsAPI:d,getMapInstance:f})((function(e){var t=e.getYMapsAPI,n=e.getMapInstance,r=e.mapInstance,o=e.places,u=Object(a.useState)([55.75,37.57]),i=Object(s.a)(u,2),l=i[0],p=i[1],m=Object(a.useState)(null),d=Object(s.a)(m,2),f=d[0],E=d[1],b=o.map((function(e){return c.a.createElement(A,Object.assign({},e,{key:e.id}))}));return Object(a.useEffect)((function(){f&&n(f)}),[f,n]),c.a.createElement(y.c,{query:{load:["geocode"],apikey:"bafd3fc2-1269-47d7-a937-5c6cea882e91"}},c.a.createElement(y.a,{className:"map",state:{center:l,zoom:9},onLoad:function(e){return t(e)},instanceRef:function(e){return E(e)},onBoundsChange:function(){return p(r.getCenter())}},b))})),I=n(3),v=n(15),P=n(16),h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_PLACE":return[].concat(Object(P.a)(e),[Object(i.a)({},t.payload)]);case"DELETE_PLACE":return e.filter((function(e){return e.id!==t.id}));case"GET_PLACEMARK_COORDINATES":return e.map((function(e){return e.name===t.payload.name?Object(i.a)({},e,{coordinates:t.payload.coordinates}):e}));default:return e}},C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_YMAPS_API":return Object(i.a)({},e,{YMapsAPI:t.YMapsAPI});case"GET_MAP_INSTANCE":return Object(i.a)({},e,{mapInstance:t.mapInstance});default:return e}},M=Object(I.d)(Object(I.c)({places:h,YMaps:C}),Object(I.a)(v.a)),N=function(){return c.a.createElement(c.a.Fragment,null,c.a.createElement(O,null),c.a.createElement(j,null),c.a.createElement(_,null))};o.a.render(c.a.createElement(u.a,{store:M},c.a.createElement(N,null)),document.getElementById("root"))}},[[18,1,2]]]);
//# sourceMappingURL=main.a75dca6c.chunk.js.map