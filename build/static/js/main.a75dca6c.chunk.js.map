{"version":3,"sources":["store/actions/addPlace.js","store/actions/deletePlace.js","store/actions/getYMapsAPI.js","store/actions/getMapInstance.js","store/actions/getPlaceCoordinates.js","components/decoration/Popup/Popup.js","components/SearchBar/SearchBar.js","components/PlacesList/PlacesItem/PlacesItem.js","components/PlacesList/PlacesList.js","components/Maps/Placemark/Placemark.js","components/Maps/Maps.js","API/apikey.js","store/reducers/places.js","store/reducers/YMaps.js","store/index.js","components/App.js","index.js"],"names":["addPlace","place","type","payload","id","nanoid","deletePlace","getYMapsAPI","YMapsAPI","getMapInstance","mapInstance","getPlaceCoordinates","name","coordinates","Popup","className","text","connect","places","useState","value","setValue","badName","setBadName","isPlaceAlreadyExist","findIndex","toLowerCase","trim","placeholder","onChange","target","onKeyDown","key","isUserDefined","startsWith","appendPlace","onClick","placesItems","map","placemarks","geocoder","dispatch","getState","YMaps","getCenter","geocode","then","response","geoObjects","get","geometry","_coordinates","properties","hintContent","options","draggable","preset","useEffect","modules","mapCenter","setMapCenter","mapRef","setMapRef","query","load","apikey","state","center","zoom","onLoad","instanceRef","onBoundsChange","action","filter","store","createStore","combineReducers","applyMiddleware","thunk","App","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.a75dca6c.chunk.js","sourcesContent":["import {nanoid} from 'nanoid';\n\nconst addPlace = place => ({\n  type: 'ADD_PLACE',\n  payload: {\n    ...place,\n    id: nanoid()\n  }\n});\n\nexport default addPlace;","const deletePlace = id => ({\n  type: 'DELETE_PLACE',\n  id\n});\n\nexport default deletePlace;","const getYMapsAPI = YMapsAPI => {\n  return {\n    type: 'GET_YMAPS_API',\n    YMapsAPI\n  };\n};\n\nexport default getYMapsAPI;","const getMapInstance = mapInstance => {\n  return {\n    type: 'GET_MAP_INSTANCE',\n    mapInstance\n  };\n};\n\nexport default getMapInstance;","const getPlaceCoordinates = (name, coordinates) => ({\n  type: 'GET_PLACEMARK_COORDINATES',\n  payload: {\n    name,\n    coordinates\n  }\n});\n\nconst geocoder = (name, isUserDefined) => {\n  return (dispatch, getState) => {\n    const {YMapsAPI, mapInstance} = getState().YMaps;\n\n    if (isUserDefined) {\n      return dispatch(getPlaceCoordinates(name, mapInstance.getCenter()));\n    } else {\n      return YMapsAPI.geocode(name).then(response => dispatch(getPlaceCoordinates(name, response.geoObjects.get(0).geometry._coordinates)));\n    }\n  };\n};\n\nexport { getPlaceCoordinates, geocoder };","import React from 'react';\n\nimport './Popup.css';\n\nconst Popup = ({className, text}) => {\n  return (\n    <div className={`${className} popup`}>\n      <p className=\"popup__text\">{text}</p>\n    </div>\n  );\n};\n\nexport default Popup;","import React, { useState } from 'react';\nimport { connect } from 'react-redux';\n\nimport './SearchBar.css';\n\nimport { addPlace } from '../../store/actions';\n\nimport Popup from '../decoration/Popup/Popup';\n\nconst SearchBar = ({places, addPlace}) => {\n  const [value, setValue] = useState('');\n  const [badName, setBadName] = useState(false);\n\n  const inputHadler = ({target: {value}}) => {\n    setValue(value);\n    isPlaceAlreadyExist(value) ? setBadName(true) : setBadName(false);\n  };\n\n  const isPlaceAlreadyExist = (value) => {\n    return places.findIndex(place => place.name.toLowerCase() === value.toLowerCase().trim()) === -1 ? false : true;\n  }\n\n  const appendPlace = () => {\n    const place = {\n      name: value.trim(),\n\n      // If the name of the place is preceeded by \"!\",\n      // then the coordinates of the place will be set from the center of the map.\n      // Otherwise, the geocoder will search for coordinates by the entered name\n      isUserDefined: value.startsWith('!') ? true : false\n    };\n\n    if (badName) {\n      return;\n    }\n\n    setValue('');\n\n    return addPlace(place);\n  };\n\n  return (\n    <div className=\"input\">\n      <input\n        className={`search-bar${badName ? ' bad-name' : ''}`}\n        type=\"text\"\n        value={value}\n        placeholder=\"Where to go?\"\n        onChange={inputHadler}\n        onKeyDown={({key}) => key === 'Enter' ? appendPlace() : null} />\n\n      <Popup className=\"input__popup\" text=\"Enter the name of the city or type something like !MyPlacemark to set your own mark label\" />\n    </div>\n  );\n};\n\nconst mapState = ({places}) => {\n  return {\n    places\n  };\n};\n\nexport default connect(mapState, {addPlace})(SearchBar);","import React from 'react';\nimport { connect } from 'react-redux';\n\nimport './PlacesItem.css';\n\nimport { deletePlace } from '../../../store/actions';\n\nconst PlacesItem = ({name, id, isUserDefined, deletePlace}) => {\n  const className = isUserDefined ? ' place_user-defined' : '';\n\n  return (\n    <div className={`places-list__place${className}`}>\n      {name}\n      <div className=\"place__remove-button\" onClick={() => deletePlace(id)}>x</div>\n    </div>\n  );\n};\n\nexport default connect(null, {deletePlace})(PlacesItem);","import React from 'react';\nimport { connect } from 'react-redux';\n\nimport './PlacesList.css';\n\nimport PlacesItem from './PlacesItem/PlacesItem';\n\nconst PlacesList = ({places}) => {\n  const placesItems = places.map(place => <PlacesItem {...place} key={place.id} />);\n\n  return (\n    <div className=\"places-list\">{placesItems}</div>\n  );\n};\n\nconst mapState = ({places}) => {\n  return {\n    places\n  };\n};\n\nexport default connect(mapState, null)(PlacesList);","import React, { useEffect } from 'react';\nimport { Placemark as Mark } from 'react-yandex-maps';\nimport { connect } from 'react-redux';\n\nimport { geocoder } from '../../../store/actions';\n\nconst Placemark = ({name, isUserDefined, coordinates, geocoder}) => {\n  const properties = {\n    hintContent: name\n  };\n\n  const options = {\n    draggable: isUserDefined ? true : false,\n    preset: isUserDefined ? 'islands#greenIcon' : 'islands#lightBlueIcon'\n  };\n\n  useEffect(() => {\n    geocoder(name, isUserDefined);\n  }, [name, isUserDefined, geocoder]);\n\n  return <Mark \n            modules={['geoObject.addon.hint']}\n            geometry={coordinates} \n            properties={properties}\n            options={options}\n            />;\n};\n\nconst mapState = ({placemarks}) => ({\n  placemarks\n});\n\nexport default connect(mapState, {geocoder})(Placemark);","import React, { useState, useEffect } from 'react';\nimport { YMaps, Map } from 'react-yandex-maps';\nimport { connect } from 'react-redux';\n\nimport './Maps.css';\n\nimport apikey from '../../API/apikey';\n\nimport { getYMapsAPI, getMapInstance } from '../../store/actions';\nimport Placemark from './Placemark/Placemark';\n\nconst Maps = ({getYMapsAPI, getMapInstance, mapInstance, places}) => {\n  const [mapCenter, setMapCenter] = useState([55.75, 37.57]);\n  const [mapRef, setMapRef] = useState(null); // Without this hook, an infinite loop of value assignment will appear\n\n  const placemarks = places.map(place => <Placemark {...place} key={place.id} />);\n\n  useEffect(() => {\n    if (mapRef) {\n      getMapInstance(mapRef);\n    }\n  }, [mapRef, getMapInstance]);\n\n  return (\n    <YMaps query={{load: ['geocode'], apikey: apikey}}>\n      <Map\n        className=\"map\"\n        state={{center: mapCenter, zoom: 9}}\n        onLoad={YMaps => getYMapsAPI(YMaps)}\n        instanceRef={map => setMapRef(map)}\n        onBoundsChange={() => setMapCenter(mapInstance.getCenter())}\n        >\n          {placemarks}\n      </Map>\n    </YMaps>\n  );\n};\n\nconst mapState = ({places, YMaps}) => {\n  return {\n    places,\n    mapInstance: YMaps.mapInstance\n  };\n};\n\nexport default connect(mapState, {getYMapsAPI, getMapInstance})(Maps);","const apikey = 'bafd3fc2-1269-47d7-a937-5c6cea882e91';\n\nexport default apikey;","const places = (state = [], action) => {\n  switch (action.type) {\n    case 'ADD_PLACE':\n      return [...state, {...action.payload}];\n\n    case 'DELETE_PLACE':\n      return state.filter(place => place.id !== action.id);\n\n      case 'GET_PLACEMARK_COORDINATES':\n        return state.map(place => place.name === action.payload.name ? {...place, coordinates: action.payload.coordinates} : place);\n  \n    default:\n      return state;\n  }\n}\n\nexport default places;","const YMaps = (state = {}, action) => {\n  switch (action.type) {\n    case 'GET_YMAPS_API':\n      return {...state, YMapsAPI: action.YMapsAPI};\n  \n    case 'GET_MAP_INSTANCE':\n      return {...state, mapInstance: action.mapInstance};\n\n    default:\n      return state;\n  }\n};\n\nexport default YMaps;","import { combineReducers, createStore, applyMiddleware } from 'redux';\nimport thunk from 'redux-thunk';\n\nimport { places, YMaps } from './reducers';\n\nconst store = createStore(combineReducers({places, YMaps}), applyMiddleware(thunk));\n\nexport default store;","import React from 'react';\n\nimport SearchBar from './SearchBar/SearchBar';\nimport PlacesList from './PlacesList/PlacesList';\nimport Maps from './Maps/Maps';\n\nimport store from '../store';\n\nconst App = () => {\n  return (\n    <>\n     <SearchBar />\n     <PlacesList />\n     <Maps />\n    </>\n  );\n}\n\nexport default App;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport {Provider} from 'react-redux';\n\nimport './index.css';\n\nimport App from './components/App';\nimport store from './store';\n\nReactDOM.render(\n<Provider store={store}>\n  <App />\n</Provider>,\ndocument.getElementById('root'));\n"],"sourceRoot":""}