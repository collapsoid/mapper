{"version":3,"sources":["store/actions/addPlace.js","store/actions/deletePlace.js","store/actions/changeCoordinates.js","store/actions/getYMapsAPI.js","store/actions/getMapInstance.js","components/decoration/Popup/Popup.js","components/SearchBar/SearchBar.js","components/PlacesList/PlacesItem/PlacesItem.js","components/PlacesList/PlacesList.js","components/Placemark/Placemark.js","components/Polyline/Polyline.js","components/Maps/Maps.js","API/apikey.js","components/App.js","store/reducers/places.js","store/reducers/YMaps.js","store/index.js","index.js"],"names":["addPlace","place","type","payload","id","nanoid","deletePlace","changeCoordinates","name","coordinates","getYMapsAPI","YMapsAPI","getMapInstance","mapInstance","Popup","className","text","connect","places","geocoder","isUserDefined","dispatch","getState","YMaps","getCenter","geocode","then","response","geoObjects","get","geometry","_coordinates","useState","value","setValue","badName","setBadName","isPlaceAlreadyExist","findIndex","toLowerCase","trim","placeholder","onChange","target","onKeyDown","key","startsWith","appendPlace","onClick","placesItems","map","properties","hintContent","options","draggable","preset","setCenter","modules","onGeometryChange","e","originalEvent","mapState","mapRef","setMapRef","placemarks","useEffect","query","load","apikey","state","onLoad","instanceRef","App","action","filter","center","zoom","store","createStore","combineReducers","applyMiddleware","thunk","ReactDOM","render","document","getElementById"],"mappings":"2VAEMA,EAAW,SAAAC,GAAK,MAAK,CACzBC,KAAM,YACNC,QAAQ,eACHF,EADE,CAELG,GAAIC,kBCDOC,EALK,SAAAF,GAAE,MAAK,CACzBF,KAAM,eACNE,OCMaG,EARW,SAACC,EAAMC,GAAP,MAAwB,CACjDP,KAAM,qBACNC,QAAS,CACRK,OACAC,iBCGaC,EAPK,SAAAC,GAClB,MAAO,CACLT,KAAM,gBACNS,aCIWC,EAPQ,SAAAC,GACrB,MAAO,CACLX,KAAM,mBACNW,gBCSWC,G,MARD,SAAC,GAAuB,IAAtBC,EAAqB,EAArBA,UAAWC,EAAU,EAAVA,KACzB,OACE,yBAAKD,UAAS,UAAKA,EAAL,WACZ,uBAAGA,UAAU,eAAeC,MCuDnBC,eANE,SAAC,GAChB,MAAO,CACLC,OAF2B,EAAZA,UAMc,CAACC,SNnDjB,SAACX,EAAMY,GACtB,OAAO,SAACC,EAAUC,GAAc,IAAD,EACGA,IAAWC,MAApCZ,EADsB,EACtBA,SAAUE,EADY,EACZA,YAEbZ,EAAQ,CACbO,OACAY,iBAGC,GAAIA,EAAe,CACpB,IAAMX,EAAcI,EAAYW,YAE7B,OAAOH,EAASrB,EAAS,eAAIC,EAAL,CAAYQ,kBAEpC,OAAOE,EAASc,QAAQjB,GAAMkB,MAAK,SAAAC,GACjC,IAAMlB,EAAckB,EAASC,WAAWC,IAAI,GAAGC,SAASC,aAExD,OAAOV,EAASrB,EAAS,eAAIC,EAAL,CAAYQ,wBMkC7BQ,EArDG,SAAC,GAAwB,IAAvBC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,SAAc,EACda,mBAAS,IADK,mBACjCC,EADiC,KAC1BC,EAD0B,OAEVF,oBAAS,GAFC,mBAEjCG,EAFiC,KAExBC,EAFwB,KASlCC,EAAsB,SAACJ,GAC3B,OAA+F,IAAxFf,EAAOoB,WAAU,SAAArC,GAAK,OAAIA,EAAMO,KAAK+B,gBAAkBN,EAAMM,cAAcC,WAsBpF,OACE,yBAAKzB,UAAU,SACb,2BACEA,UAAS,oBAAeoB,EAAU,YAAc,IAChDjC,KAAK,OACL+B,MAAOA,EACPQ,YAAY,eACZC,SAnCc,SAAC,GAAuB,IAAbT,EAAY,EAArBU,OAASV,MAC7BC,EAASD,GACTI,EAAoBJ,GAASG,GAAW,GAAQA,GAAW,IAkCvDQ,UAAW,kBAAmB,UAAnB,EAAEC,IA3BC,WAClB,IAAM5C,EAAQ,CACZO,KAAMyB,EAAMO,OAKZpB,gBAAea,EAAMa,WAAW,MAGlC,IAAIX,GAA0B,MAAflC,EAAMO,KAMvB,OAFE0B,EAAS,IAEJf,EAASlB,EAAMO,KAAMP,EAAMmB,eAWY2B,GAAgB,QAE1D,kBAAC,EAAD,CAAOhC,UAAU,eAAeC,KAAK,kGCjC5BC,G,YAAAA,YAAQ,KAAM,CAACX,eAAfW,EAXI,SAAC,GAA4C,IAA3CT,EAA0C,EAA1CA,KAAMJ,EAAoC,EAApCA,GAAIgB,EAAgC,EAAhCA,cAAed,EAAiB,EAAjBA,YACtCS,EAAYK,EAAgB,sBAAwB,GAE1D,OACE,yBAAKL,UAAS,4BAAuBA,IAClCP,EACD,yBAAKO,UAAU,uBAAuBiC,QAAS,kBAAM1C,EAAYF,KAAjE,UCQSa,eANE,SAAC,GAChB,MAAO,CACLC,OAF2B,EAAZA,UAMc,KAAlBD,EAdI,SAAC,GAAc,IAC1BgC,EADyB,EAAZ/B,OACQgC,KAAI,SAAAjD,GAAK,OAAI,kBAAC,EAAD,iBAAgBA,EAAhB,CAAuB4C,IAAK5C,EAAMG,SAE1E,OACE,yBAAKW,UAAU,eAAekC,M,OCsBnBhC,G,MAAAA,aAJE,SAAC,GAAD,MAA6B,CAC7CJ,YADgB,EAAEU,MAAQV,eAIM,CAACN,qBAAnBU,EA3BG,SAAC,GAAwE,IAAvET,EAAsE,EAAtEA,KAAMY,EAAgE,EAAhEA,cAAeX,EAAiD,EAAjDA,YAAaI,EAAoC,EAApCA,YAAaN,EAAuB,EAAvBA,kBAC3D4C,EAAa,CACjBC,YAAa5C,GAGT6C,EAAU,CACdC,YAAWlC,EACXmC,OAAQnC,EAAgB,oBAAsB,yBAOhD,OAJIA,GAAiBX,GACrBI,EAAY2C,UAAU/C,EAAa,IAG5B,kBAAC,IAAD,CACGgD,QAAS,CAAC,wBACV3B,SAAUrB,EACV0C,WAAYA,EACZE,QAASA,EACfK,iBAAkB,SAACC,GAAD,OAAOpD,EAAkBC,EAAMmD,EAAEC,cAAcjB,OAAOb,SAASC,qBCXxEd,eAJE,SAAC,GAAD,MAAe,CAC/BC,OADgB,EAAEA,UAIJD,EAVE,SAAC,GAAc,IACzBR,EADwB,EAAZS,OACSgC,KAAI,SAAAjD,GAAK,OAAIA,EAAMQ,eAE9C,OAAO,kBAAC,IAAD,CAAMqB,SAAUrB,OC0CTQ,eARE,YAA+C,IAA7CC,EAA4C,EAA5CA,OAA4C,IAApCK,MAAQsC,EAA4B,EAA5BA,SACjC,MAAO,CACL3C,SACA2C,WACAhD,YAJ2D,EAAlBA,eAQZ,CAACH,cAAaE,kBAAhCK,EArCF,SAAC,GAA+D,IAA9DP,EAA6D,EAA7DA,YAAaE,EAAgD,EAAhDA,eAAgBM,EAAgC,EAAhCA,OAAQ2C,EAAwB,EAAxBA,SAAwB,KAAd1C,SAChCa,mBAAS,OADqC,mBACnE8B,EADmE,KAC3DC,EAD2D,KAGpEC,EAAa9C,EAAOgC,KAAI,SAAAjD,GAAK,OAAI,kBAAC,EAAD,iBAAeA,EAAf,CAAsB4C,IAAK5C,EAAMG,SAQxE,OANA6D,qBAAU,WACJH,GACFlD,EAAekD,KAEhB,CAACA,EAAQlD,IAGV,kBAAC,IAAD,CAAOsD,MAAO,CAACC,KAAM,CAAC,WAAYC,OCxBvB,yCDyBT,kBAAC,IAAD,CACErD,UAAU,MACVsD,MAAOR,EACPS,OAAQ,SAAA/C,GAAK,OAAIb,EAAYa,IAC7BgD,YAAa,SAAArB,GAAG,OAAIa,EAAUb,KAEjCc,EAED,kBAAC,EAAD,WEjBWQ,EAVH,WACV,OACE,oCACD,kBAAC,EAAD,MACA,kBAAC,EAAD,MACA,kBAAC,EAAD,Q,uBCOYtD,EAlBA,WAAyB,IAAxBmD,EAAuB,uDAAf,GAAII,EAAW,uCACrC,OAAQA,EAAOvE,MACb,IAAK,YACH,MAAM,GAAN,mBAAWmE,GAAX,gBAAsBI,EAAOtE,WAE/B,IAAK,eACH,OAAOkE,EAAMK,QAAO,SAAAzE,GAAK,OAAIA,EAAMG,KAAOqE,EAAOrE,MAErD,IAAK,qBAAL,MAC6BqE,EAAOtE,QAA5BK,EADR,EACQA,KAAMC,EADd,EACcA,YAEb,OAAO4D,EAAMnB,KAAI,SAAAjD,GAAK,OAAIA,EAAMO,OAASA,EAAf,eAA0BP,EAA1B,CAAiCQ,gBAAeR,KAEzE,QACE,OAAOoE,ICEE9C,EAhBD,WAAoE,IAAnE8C,EAAkE,uDAA1D,CAACR,SAAU,CAACc,OAAQ,CAAC,MAAO,OAAQC,KAAM,IAAKH,EAAW,uCAC/E,OAAQA,EAAOvE,MACb,IAAK,gBACH,OAAO,eAAImE,EAAX,CAAkB1D,SAAU8D,EAAO9D,WAErC,IAAK,mBACH,OAAO,eAAI0D,EAAX,CAAkBxD,YAAa4D,EAAO5D,cAExC,IAAK,gBACJ,OAAO,eAAIwD,EAAX,CAAkBR,SAAS,eAAKQ,EAAMR,SAAZ,GAAyBY,EAAOZ,YAE3D,QACE,OAAOQ,ICLEQ,EAFDC,YAAYC,YAAgB,CAAC7D,SAAQK,UAASyD,YAAgBC,MCI5EC,IAASC,OACT,kBAAC,IAAD,CAAUN,MAAOA,GACf,kBAAC,EAAD,OAEFO,SAASC,eAAe,W","file":"static/js/main.ec1c1c44.chunk.js","sourcesContent":["import {nanoid} from 'nanoid';\n\nconst addPlace = place => ({\n  type: 'ADD_PLACE',\n  payload: {\n    ...place,\n    id: nanoid()\n  }\n});\n\n\nconst geocoder = (name, isUserDefined) => {\n  return (dispatch, getState) => {\n    const {YMapsAPI, mapInstance} = getState().YMaps;\n\n\t\tconst place = {\n\t\t\tname,\n\t\t\tisUserDefined\n\t\t};\n\n    if (isUserDefined) {\n\t\t\tconst coordinates = mapInstance.getCenter();\n\n      return dispatch(addPlace({...place, coordinates}));\n    } else {\n      return YMapsAPI.geocode(name).then(response => {\n        const coordinates = response.geoObjects.get(0).geometry._coordinates;\n\n        return dispatch(addPlace({...place, coordinates}));\n      });\n    }\n  };\n};\n\n\nexport {addPlace, geocoder};\n","const deletePlace = id => ({\n  type: 'DELETE_PLACE',\n  id\n});\n\nexport default deletePlace;","const changeCoordinates = (name, coordinates) => ({\n\ttype: 'CHANGE_COORDINATES',\n\tpayload: {\n\t\tname,\n\t\tcoordinates\n\t}\n});\n\nexport default changeCoordinates;\n","const getYMapsAPI = YMapsAPI => {\n  return {\n    type: 'GET_YMAPS_API',\n    YMapsAPI\n  };\n};\n\nexport default getYMapsAPI;","const getMapInstance = mapInstance => {\n  return {\n    type: 'GET_MAP_INSTANCE',\n    mapInstance\n  };\n};\n\nexport default getMapInstance;","import React from 'react';\n\nimport './Popup.css';\n\nconst Popup = ({className, text}) => {\n  return (\n    <div className={`${className} popup`}>\n      <p className=\"popup__text\">{text}</p>\n    </div>\n  );\n};\n\nexport default Popup;","import React, {useState} from 'react';\nimport {connect} from 'react-redux';\n\nimport './SearchBar.css';\n\nimport {geocoder} from '../../store/actions';\n\nimport Popup from '../decoration/Popup/Popup';\n\nconst SearchBar = ({places, geocoder}) => {\n  const [value, setValue] = useState('');\n  const [badName, setBadName] = useState(false);\n\n  const inputHadler = ({target: {value}}) => {\n    setValue(value);\n    isPlaceAlreadyExist(value) ? setBadName(true) : setBadName(false);\n  };\n\n  const isPlaceAlreadyExist = (value) => {\n    return places.findIndex(place => place.name.toLowerCase() === value.toLowerCase().trim()) === -1 ? false : true;\n  }\n\n  const appendPlace = () => {\n    const place = {\n      name: value.trim(),\n\n      // If the name of the place is preceeded by \"!\",\n      // then the coordinates of the place will be set from the center of the map.\n      // Otherwise, the geocoder will search for coordinates by the entered name\n      isUserDefined: value.startsWith('!') ? true : false\n    };\n\n    if (badName || place.name === '!') {\n      return;\n    }\n\n    setValue('');\n\n\t\treturn geocoder(place.name, place.isUserDefined);\n  };\n\n  return (\n    <div className=\"input\">\n      <input\n        className={`search-bar${badName ? ' bad-name' : ''}`}\n        type=\"text\"\n        value={value}\n        placeholder=\"Where to go?\"\n        onChange={inputHadler}\n        onKeyDown={({key}) => key === 'Enter' ? appendPlace() : null} />\n\n      <Popup className=\"input__popup\" text=\"Enter the name of the city or type something like !MyPlacemark to set your own mark label\" />\n    </div>\n  );\n};\n\nconst mapState = ({places}) => {\n  return {\n    places\n  };\n};\n\nexport default connect(mapState, {geocoder})(SearchBar);\n","import React from 'react';\nimport { connect } from 'react-redux';\n\nimport './PlacesItem.css';\n\nimport { deletePlace } from '../../../store/actions';\n\nconst PlacesItem = ({name, id, isUserDefined, deletePlace}) => {\n  const className = isUserDefined ? ' place_user-defined' : '';\n\n  return (\n    <div className={`places-list__place${className}`}>\n      {name}\n      <div className=\"place__remove-button\" onClick={() => deletePlace(id)}>x</div>\n    </div>\n  );\n};\n\nexport default connect(null, {deletePlace})(PlacesItem);","import React from 'react';\nimport { connect } from 'react-redux';\n\nimport './PlacesList.css';\n\nimport PlacesItem from './PlacesItem/PlacesItem';\n\nconst PlacesList = ({places}) => {\n  const placesItems = places.map(place => <PlacesItem {...place} key={place.id} />);\n\n  return (\n    <div className=\"places-list\">{placesItems}</div>\n  );\n};\n\nconst mapState = ({places}) => {\n  return {\n    places\n  };\n};\n\nexport default connect(mapState, null)(PlacesList);","import React from 'react';\nimport {Placemark as Mark} from 'react-yandex-maps';\nimport {connect} from 'react-redux';\n\nimport {changeCoordinates} from '../../store/actions';\n\nconst Placemark = ({name, isUserDefined, coordinates, mapInstance, changeCoordinates}) => {\n  const properties = {\n    hintContent: name\n  };\n\n  const options = {\n    draggable: isUserDefined ? true : false,\n    preset: isUserDefined ? 'islands#greenIcon' : 'islands#lightBlueIcon'\n  };\n\n\tif (!isUserDefined && coordinates) {\n\t\tmapInstance.setCenter(coordinates, 12);\n\t}\n\n  return <Mark \n            modules={['geoObject.addon.hint']}\n            geometry={coordinates} \n            properties={properties}\n            options={options} \n\t\t\t\t\t\tonGeometryChange={(e) => changeCoordinates(name, e.originalEvent.target.geometry._coordinates)}\n\t\t\t\t/>;\n};\n\nconst mapState = ({YMaps: {mapInstance}}) => ({\n\tmapInstance\n});\n\nexport default connect(mapState, {changeCoordinates})(Placemark);\n","import React from 'react';\nimport {connect} from 'react-redux';\nimport {Polyline as Poly} from 'react-yandex-maps';\n\nconst Polyline = ({places}) => {\n\tconst coordinates = places.map(place => place.coordinates);\n\n\treturn <Poly geometry={coordinates} />;\n};\n\nconst mapState = ({places}) => ({\n\tplaces\n});\n\nexport default connect(mapState)(Polyline);\n","import React, {useState, useEffect} from 'react';\nimport {YMaps, Map} from 'react-yandex-maps';\nimport {connect} from 'react-redux';\n\nimport './Maps.css';\n\nimport apikey from '../../API/apikey';\n\nimport {getYMapsAPI, getMapInstance} from '../../store/actions';\nimport Placemark from '../Placemark/Placemark';\nimport Polyline from '../Polyline/Polyline';\n\nconst Maps = ({getYMapsAPI, getMapInstance, places, mapState, geocoder}) => {\n  const [mapRef, setMapRef] = useState(null); // Without this hook, an infinite loop of value assignment will appear\n\n  const placemarks = places.map(place => <Placemark {...place} key={place.id} />);\n\n  useEffect(() => {\n    if (mapRef) {\n      getMapInstance(mapRef);\n    }\n  }, [mapRef, getMapInstance]);\n\n  return (\n    <YMaps query={{load: ['geocode'], apikey: apikey}}>\n      <Map\n        className=\"map\"\n        state={mapState}\n        onLoad={YMaps => getYMapsAPI(YMaps)}\n        instanceRef={map => setMapRef(map)}>\n\n\t\t\t\t{placemarks}\n\n\t\t\t\t<Polyline />\n\n      </Map>\n    </YMaps>\n  );\n};\n\n\nconst mapState = ({places, YMaps: {mapState, mapInstance}}) => {\n  return {\n    places,\n    mapState,\n    mapInstance\n  };\n};\n\nexport default connect(mapState, {getYMapsAPI, getMapInstance})(Maps);\n","const apikey = 'bafd3fc2-1269-47d7-a937-5c6cea882e91';\n\nexport default apikey;","import React from 'react';\n\nimport SearchBar from './SearchBar/SearchBar';\nimport PlacesList from './PlacesList/PlacesList';\nimport Maps from './Maps/Maps';\n\nconst App = () => {\n  return (\n    <>\n\t\t\t<SearchBar />\n\t\t\t<PlacesList />\n\t\t\t<Maps />\n    </>\n  );\n}\n\nexport default App;\n","const places = (state = [], action) => {\n  switch (action.type) {\n    case 'ADD_PLACE':\n      return [...state, {...action.payload}];\n\n    case 'DELETE_PLACE':\n      return state.filter(place => place.id !== action.id);\n\n\t\tcase 'CHANGE_COORDINATES':\n\t\t\tconst {name, coordinates} = action.payload;\n\n\t\t\treturn state.map(place => place.name === name ? {...place, coordinates} : place);\n\n    default:\n      return state;\n  }\n}\n\nexport default places;\n","const YMaps = (state = {mapState: {center: [55.75, 37.57], zoom: 9}}, action) => {\n  switch (action.type) {\n    case 'GET_YMAPS_API':\n      return {...state, YMapsAPI: action.YMapsAPI};\n  \n    case 'GET_MAP_INSTANCE':\n      return {...state, mapInstance: action.mapInstance};\n\n    case 'SET_MAP_STATE':\n     return {...state, mapState: {...state.mapState, ...action.mapState}};\n\n    default:\n      return state;\n  }\n};\n\nexport default YMaps;","import { combineReducers, createStore, applyMiddleware } from 'redux';\nimport thunk from 'redux-thunk';\n\nimport { places, YMaps } from './reducers';\n\nconst store = createStore(combineReducers({places, YMaps}), applyMiddleware(thunk));\n\nexport default store;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport {Provider} from 'react-redux';\n\nimport './index.css';\n\nimport App from './components/App';\nimport store from './store';\n\nReactDOM.render(\n<Provider store={store}>\n  <App />\n</Provider>,\ndocument.getElementById('root'));\n"],"sourceRoot":""}